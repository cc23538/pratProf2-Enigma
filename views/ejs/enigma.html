<!DOCTYPE html>
<html>

<head>
    <title>Exemplo de Criptografia e Descriptografia</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body class="p-4">
    <div class="container">
        <h2 class="mb-4">Enigma - Criptografia e Descriptografia de Frases</h2>

        <div class="form-group">
            <label for="frase">Digite a frase:</label>
            <input type="text" class="form-control" id="frase">
        </div>

        <div class="mt-3">
            <button class="btn btn-primary mr-2" onclick="criptografar()">Criptografar</button>
            <button class="btn btn-secondary" onclick="descriptografar()">Descriptografar</button>
            <button class="btn btn-success ml-2" onclick="salvarFrase()">Salvar</button>
        </div>

        <div class="mt-3 form-group">
            <label for="resultado">Resultado:</label>
            <textarea class="form-control" id="resultado" rows="4"></textarea>
        </div>

        <div class="mt-5">
            <h4>Frases Salvas:</h4>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Frase</th>
                        <th scope="col">Ações</th>
                    </tr>
                </thead>
                <tbody id="frases-lista">
                    <% for (var i = 0; i < frases.length; i++) { %>
                        <tr>
                            <td><%= i + 1 %></td>
                            <td><%= frases[i].frase %></td>
                            <td>
                                <button class="btn btn-danger btn-sm" onclick="excluirFrase('<%= frases[i]._id %>')">Excluir</button>
                                <button class="btn btn-primary btn-sm" onclick="editarFrase('<%= frases[i]._id %>','<%= frases[i].frase %>')">Editar</button>
                            </td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Bootstrap JS (Popper.js and Bootstrap JS) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        function criptografar() {
            var frase = document.getElementById('frase').value;
            var fraseCriptografada = CryptoJS.AES.encrypt(frase, "chave_secreta").toString();
            document.getElementById('resultado').value = fraseCriptografada;
        }

        function descriptografar() {
            var fraseCriptografada = document.getElementById('resultado').value;
            var fraseDescriptografada = CryptoJS.AES.decrypt(fraseCriptografada, "chave_secreta").toString(CryptoJS.enc.Utf8);
            document.getElementById('resultado').value = fraseDescriptografada;
        }

        function salvarFrase() {
            var novaFrase = document.getElementById('resultado').value;
            // Aqui você precisará enviar uma solicitação ao servidor para salvar a frase no banco de dados.
            // Use uma biblioteca como Axios ou o objeto fetch para fazer uma solicitação POST ao servidor.
        }

        function excluirFrase(id) {
            // Aqui você precisará enviar uma solicitação ao servidor para excluir a frase do banco de dados com o ID fornecido.
            // Use uma biblioteca como Axios ou o objeto fetch para fazer uma solicitação DELETE ao servidor.
        }

        function editarFrase(id, frase) {
            // Aqui você precisará preencher o campo 'frase' com a frase fornecida e permitir que o usuário a edite.
            // Após a edição, envie uma solicitação PUT ao servidor com o ID e a nova frase para atualização no banco de dados.
        }
    </script>
</body>

</html>
